<!doctype html>
<head>
    <!--<link href="https://fonts.googleapis.com/css?family=Advent+Pro" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
    <!-- <link rel="stylesheet" href="/css/bootstrap-theme.min.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="../../static/style.css">
</head>
<meta charset="utf-8">

<!-- <link rel="stylesheet" href="/css/bootstrap-theme.min.css"> -->
<title>Finding non-unique elements in a list with Python â€” Forbajato Techblog</title>
<body id="bgc">
    <div class="navbar navbar-default navbar-fixed-top" id="bgc">
      <div class="container">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> </button>
      <a class="navbar-brand" href="#">ForbajatoTechblog</a>
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="../../">Welcome</a></li>
        
          <li class="active"><a href="../../blog/">Blog</a></li>
        
          <li><a href="../../about/">About</a></li>
        
      <!-- <li class="active"><a href="#home">Home</a></li>
      <li class="active"><a href="#portfolio">Blog</a></li>
      <li class="active"><a href="#about">About</a></li> -->
      </ul></span>
      <span class="icon-bar">
      <!-- <ul class="nav navbar navbar-center">
      <li><a href="http://www.gansugateway.com">Gansu Gateway</a></li>
      </ul> --> </span>
      <span class="icon-bar"></span>
      </div>
      <div class="navbar-header">
      <div class="navbarcal-collapse collapse">
      </div>
      </div>
  </div>
<div class="container">
  <header>
      <div class="content">
       <div class="row">
       <div class="page-header-wrapper">
       <div class="page-header">
       <h1 id="headline">Welcome to Forbajato's Techblog!<small> Documenting tech wins and losses</small></h1>
       </div>
   </div>
   </div>
   </div>
</div>
<!--    <h1>Forbajato Techblog</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a href="../../">Welcome</a></li>
        
          <li class="active"><a href="../../blog/">Blog</a></li>
        
          <li><a href="../../projects/">Projects</a></li>
        
          <li><a href="../../about/">About</a></li>
        
      </ul>
  </nav> -->
  </header>
  <div class="container">
  <div class="page">
    
  
  <div class="blog-post">
  
    <h2>Finding non-unique elements in a list with Python</h2>
  
  <p class="meta">
    written by
    
      Thomas C Hicks
    
    on 2013-12-30
  </p>
  <h1>Introduction</h1>
<p>I am always looking for ways to keep learning different things.  I love programming and my most common language of choice is python (though I have played with arduino, processing, javascript and bash).  Fortunately there is no shortage of web based tutorials and challenges to get you going in Python programming.</p>
<p>Recently I stumbled on the <a href="http://www.checkio.org">Checkio</a> site.  This is like the <a href="http://pythonchallenge.com">Python Challenge</a> site in that there are staged puzzles that you must solve in order to move forward.  Unlike the Python Challenge each level has a number of puzzles that you can choose from so if you are flailing away at one problem you can always switch to another to keep moving forward and keep learning.</p>
<h1>The puzzle</h1>
<p>The first puzzle on the site seems to be the "Non-unique Elements" puzzle.  In it you have to take a list of arbitrary length and find all the elements in it that are not unique.  For instance the list <code>[1,1,3,3,2]</code> would return a list of only the non-unique elements <code>[1,1,3,3]</code> and discard the 2.</p>
<h1>First solution (i.e. "The inelegant one!")</h1>
<p>I always fall into this trap - thinking I have to build a list from another list.  It works but is clunky and makes the code rather long.  Anyway this worked:</p>
<pre><code>def checkio(data):
    ans = []
    for r in data:
        if data.count(r) &gt; 1:
            ans.append(r)
    return ans
</code></pre>
<p>All the function is doing is setting up an empty list (to collect the answers) then looping through the list passed in to it and counting the number of times each element shows up in the original list.  If that count is greater than 1 (i.e. the element is non-unique) then the element is appended to the answer list.  Finally the answer list is returned.</p>
<p>This has a number of problems.</p>
<ol>
<li>It is rather long - too many lines of code for something that could be done in a much simpler way.</li>
<li>Nagging feeling that there is a better way - ever have that nagging feeling that you are doing something you have done wrong before and know there is a better way?  This gave me that feeling too.</li>
<li>Needlessly counting every element as it is encountered - why should you have to count the first element again when it is encountered the second time in the list?  You already know it is in the answer list.  For short lists this is not important but if you are dealing with large datasets this could be annoying and time consuming.</li>
</ol>
<h1>Using a list comprehension</h1>
<p>OK, the nagging went away when I realized the better solution is with a list comprehension. You think of a list comprehension as a way to make a list from a data set and should always think of it when you have the pattern:</p>
<pre><code>ans=[]
 &lt;do something&gt;
 ans.append(list_element)
</code></pre>
<p>If you are looping and doing a lot of "loop.appending" there is a better way.  List comprehensions can also have a conditional tied to them so here is a much better way (still not the best, you have to solve the puzzle yourself to see the best submitted answer!).</p>
<pre><code>def checkio_list_comprehension(data):
    ans = [r for r in data if data.count(r) &gt; 1]
    return ans
</code></pre>
<p>So much simpler, easier to read (assuming you know about list comprehensions which, now you do!) and easier to debug.  You could even set the return to the list comprehension and eliminate a line of code further.</p>
<p>I still don't have a great answer to how to keep from checking repeated elements repeatedly.  If you have a thought leave a comment!</p>

  </div>

  <!--
  Uncomment the below when tags start working
  <ul>
    <li>
        <a href="../../blog/tag/python">
          All posts tagged python
    <li>
        <a href="../../blog/tag/puzzle">
          All posts tagged puzzle
    <li>
        <a href="../../blog/tag/checkio">
          All posts tagged checkio
    <li>
        <a href="../../blog/tag/learning">
          All posts tagged learning
    <li>
        <a href="../../blog/tag/tutorial">
          All posts tagged tutorial
    
</ul> 
 -->
<div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/finding-non-unique-elements-in-a-list-with-python"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//forbajatotechblog.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

  </div>
  </div>
  <footer>
    &copy; Copyright 2016 by Thomas C. Hicks.
  </footer>
</body>
